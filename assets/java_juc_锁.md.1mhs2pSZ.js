import{_ as t,c as e,o,ag as r}from"./chunks/framework.DPDPlp3K.js";const u=JSON.parse('{"title":"乐观锁 & 悲观锁","description":"","frontmatter":{},"headers":[],"relativePath":"java/juc/锁.md","filePath":"java/juc/锁.md"}'),n={name:"java/juc/锁.md"};function i(l,a,d,h,c,s){return o(),e("div",null,a[0]||(a[0]=[r('<h1 id="乐观锁-悲观锁" tabindex="-1">乐观锁 &amp; 悲观锁 <a class="header-anchor" href="#乐观锁-悲观锁" aria-label="Permalink to &quot;乐观锁 &amp; 悲观锁&quot;">​</a></h1><h2 id="悲观锁" tabindex="-1">悲观锁 <a class="header-anchor" href="#悲观锁" aria-label="Permalink to &quot;悲观锁&quot;">​</a></h2><h3 id="synchronized" tabindex="-1">synchronized <a class="header-anchor" href="#synchronized" aria-label="Permalink to &quot;synchronized&quot;">​</a></h3><ol><li>普通方法锁 锁当前对象</li><li>静态方法锁 锁类对象</li><li>代码块锁 锁括号中的对象</li></ol><p>lock</p><h2 id="乐观锁" tabindex="-1">乐观锁 <a class="header-anchor" href="#乐观锁" aria-label="Permalink to &quot;乐观锁&quot;">​</a></h2><p>version控制</p><p>CAS</p><h1 id="公平锁-非公平锁" tabindex="-1">公平锁 &amp; 非公平锁 <a class="header-anchor" href="#公平锁-非公平锁" aria-label="Permalink to &quot;公平锁 &amp; 非公平锁&quot;">​</a></h1><table tabindex="0"><thead><tr><th></th><th>公平锁</th><th>非公平锁</th></tr></thead><tbody><tr><td>介绍</td><td>顺序获取锁,先到先得</td><td>不按照顺序,先抢先得</td></tr><tr><td>性能</td><td>每次线程切换消耗时间,性能偏低</td><td>节省线程切换时间,性能高</td></tr></tbody></table><h1 id="可重入锁-递归锁" tabindex="-1">可重入锁(递归锁) <a class="header-anchor" href="#可重入锁-递归锁" aria-label="Permalink to &quot;可重入锁(递归锁)&quot;">​</a></h1><p>同一个线程,获取到方法外部锁,再次进入同一把锁的方法会自动获得锁</p><ol><li><strong>synchronized</strong> 通过关键字,无需手动加锁</li><li><strong>ReentrantLock()</strong> 通过lock,unlock方法加减锁,并且一个lock方法必须对于一个unlock方法</li></ol><h6 id="为什么对象可以作为锁-可重入锁原理" tabindex="-1">为什么对象可以作为锁,可重入锁原理? <a class="header-anchor" href="#为什么对象可以作为锁-可重入锁原理" aria-label="Permalink to &quot;为什么对象可以作为锁,可重入锁原理?&quot;">​</a></h6><p>每个对象都有一个monitor对象(管程,监视器锁)</p><p>在hotSpot中,由ObjectMonitor实现,其中有一个锁计数器和指向持有当前锁的线程指针(也有其他变量)</p><p>当加锁monitorenter时,锁计数器加一,如果是从0到1指针指向当前线程</p><p>当释放锁monitorexit时,计数器减一,如果从1到0指针置空</p>',18)]))}const m=t(n,[["render",i]]);export{u as __pageData,m as default};
